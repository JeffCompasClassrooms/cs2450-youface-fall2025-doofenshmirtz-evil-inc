{% extends "base.html" %}

{% block content %}

{% set friend_username = friend.username if friend.username is defined else friend %}
{% set friend_handle = friend.handle if friend.handle is defined else friend %}
{% set friend_bio = friend.bio if friend.bio is defined else '' %}
{% set friend_profile_pic = friend.pfp if friend.pfp is defined else 'uploads/AgentC.png' %}

<div class="row justify-content-center my-5">
  <div class="col-md-8 text-center">
    <div class="card shadow-lg border-0 rounded-4 p-4 bg-light">
      <div class="d-flex flex-column align-items-center">
        <img 
          src="{{ friend.profile_pic_url or url_for('static', filename=friend_profile_pic) }}" 
          alt="Profile picture of {{ friend_username }}"
          class="rounded-circle mb-3 shadow-sm"
          style="width: 180px; height: 180px; object-fit: cover; border: 4px solid white;"
        >

        <h2 class="fw-bold mb-1">{{ friend_username }}</h2>
        <h5 class="text-muted mb-3">@{{ friend_handle }}</h5>

        {% if friend_bio %}
          <p class="text-secondary fs-5 fst-italic mb-0">
            "{{ friend_bio }}"
          </p>
        {% else %}
          <p class="text-muted fst-italic">This user hasnâ€™t written a bio yet.</p>
        {% endif %}
      </div>
    </div>
  </div>
</div>


<div class="row justify-content-md-center">
  <div class="col col-lg-8">
    <h2>Recent Posts</h2>
    {% for post in posts %}
    <div class="card bg-light">
      <div class="card-body">
        <h4 class="card-title">{{ post.user }}</h4>
        <h6 class="card-subtitle mb-2 text-muted">{{ post.time|convert_time }}</h6>
        <p class="card-text">{{ post.text }}</p>
      </div>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
